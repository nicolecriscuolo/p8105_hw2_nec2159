p8105_hw2_nec2159
================
Nicole Criscuolo
2025-09-23

## Problem 1

``` r
pols_df =
  read_csv("data/pols-month.csv") |> 
  relocate(mon, prez_gop, prez_dem) |> 
  separate(mon, into = c("year", "month", "day"), sep = "-") |> 
  mutate(month = month.name[as.numeric(month)]) |> 
  pivot_longer(
    cols = prez_gop:prez_dem,
    names_to = "president",
    values_to = "yes_no"
  )|> 
  filter(yes_no != 0) |> 
    mutate(president = case_match(
    president,
    "prez_dem" ~ "dem",
    "prez_gop" ~ "gop"), 
    year = as.numeric(year)
  ) |> 
  select(-day, -yes_no)
```

    ## Rows: 822 Columns: 9
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## dbl  (8): prez_gop, gov_gop, sen_gop, rep_gop, prez_dem, gov_dem, sen_dem, r...
    ## date (1): mon
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

``` r
snp_df = 
  read_csv("data/snp.csv") |> 
  separate(date, into = c("month", "day", "year"), sep = "/") |> 
  mutate(year = as.numeric(year), 
         year = if_else(year >= 50, year + 1900, year + 2000),
         month = as.numeric(month)) |> 
  arrange(year, month) |> 
  mutate(month = month.name[month]) |> 
  relocate(year) |> 
  select(-day) |> 
  rename (snp_close = close)
```

    ## Rows: 787 Columns: 2
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## chr (1): date
    ## dbl (1): close
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

``` r
unemployment_df =
  read_csv("data/unemployment.csv") |> 
  pivot_longer(
    cols = Jan:Dec,
    names_to = "month",
    values_to = "unemployment_percentage"
  ) |> 
  rename(year = Year) |> 
  mutate(month = case_match(
    month,
    "Jan" ~ "January",
    "Feb" ~ "February",
    "Mar" ~ "March",
    "Apr" ~ "April",
    "May" ~ "May",
    "Jun" ~ "June",
    "Jul" ~ "July",
    "Aug" ~ "August",
    "Sep" ~ "September",
    "Oct" ~ "October",
    "Nov" ~ "November",
    "Dec" ~ "December"),
    year = as.numeric(year))
```

    ## Rows: 68 Columns: 13
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## dbl (13): Year, Jan, Feb, Mar, Apr, May, Jun, Jul, Aug, Sep, Oct, Nov, Dec
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

``` r
joined_df = 
  full_join(pols_df, snp_df)
```

    ## Joining with `by = join_by(year, month)`

``` r
all_df = 
  full_join(joined_df, unemployment_df)
```

    ## Joining with `by = join_by(year, month)`

The first data set included information about the party affiliation of
national politicians. More specifically, it gave the number of
governors, senators, and representatives that belonged to each party as
well as the president’s affiliation on the 15th of each month from 1947
to 2015. The second data set included the closing values of the Standard
& Poor’s (S&P) stock market index at the beginning of any given month
from 1950 to 2015. The last data set showed the percentage of
unemployment during any given month from 1948 to 2015. After tidying and
joining all three of these data sets, the resulting data set shows the
unemployment percentage (`unemployment_percentage`), the closing S&P
stock index (`snp_close`), the party affiliation of the president
(`president`), and the number of governors, senators, and
representatives who belong to the republican party (`gov_gop`,
`sen_gop`, `rep_gop`) and the democratic party (`gov_dem`, `sen_dem`,
`rep_dem`). Each of these values are shown for during any given month
from 1947 to 2015. This data set includes 828 observations and 11
variables.

## Problem 2

``` r
mr_trash_df =
  read_excel("data/202409 Trash Wheel Collection Data.xlsx", 
            range = "A2:N655", 
            na = c("NA", ".", "")) |> 
  janitor::clean_names() |> 
  drop_na(dumpster) |> 
  mutate(sports_balls = as.integer(round(sports_balls)),
         year = as.numeric(year),
         wheel = "mister")

# do i also need to separate date into month day year columns
```

``` r
prof_trash_df =
  read_excel("data/202409 Trash Wheel Collection Data.xlsx", 
             sheet = 2,
             range = "A2:M120", 
             na = c("NA", ".", "")) |> 
  janitor::clean_names() |> 
  drop_na(dumpster) |> 
  mutate(year = as.numeric(year),
         wheel = "professor")
```

``` r
gwynnda_trash_df =
  read_excel("data/202409 Trash Wheel Collection Data.xlsx",
             sheet = 4,
             range = "A2:L266",
             na = c("NA", ".", "")) |> 
  janitor::clean_names() |> 
  drop_na(dumpster) |> 
  mutate(year= as.numeric(year),
         wheel = "gwynnda")
```

``` r
trash_df = 
  full_join(mr_trash_df, prof_trash_df)
```

    ## Joining with `by = join_by(dumpster, month, year, date, weight_tons,
    ## volume_cubic_yards, plastic_bottles, polystyrene, cigarette_butts,
    ## glass_bottles, plastic_bags, wrappers, homes_powered, wheel)`

``` r
full_trash_df =
  full_join(trash_df, gwynnda_trash_df) |> 
  relocate(wheel)
```

    ## Joining with `by = join_by(dumpster, month, year, date, weight_tons,
    ## volume_cubic_yards, plastic_bottles, polystyrene, cigarette_butts,
    ## plastic_bags, wrappers, homes_powered, wheel)`

Each of the three data sets described 1 of 3 different trash wheels:
Mr. Trash Wheel, Professor Trash Wheel, and Gwynnda Trash Wheel. They
all included information that described dumpster number, date, amount of
litter collected, type of litter collected, and number of homes powered
with collected litter Once these data sets are joined, the resulting
data set includes 1032 observations and 15 variables. It describes the
amount of litter collected, type of litter collected, and number of
homes powered (`homes_powered`) on certain dates from 2014 to 2024 for
each trash wheel (`wheel`). The variables describing amount of litter
include weight in tons (`weight_tons`) and volume in cubic yards
(`volume_cubic_yards`). The variables describing type of litter include
number of plastic bottles (`plastic_bottles`), polystyrene
(`polystyrene`), glass bottles (`glass_bottles`), plastic bags
(`plastic_bags`), wrappers (`wrappers`), and sports balls
(`sports_balls`).

The total weight collected by Professor Trash Wheel was 246.74 tons. The
total number of cigarette butts collected by Gwynnda in June of 2022 was
18120.

## Problem 3

``` r
zip_df =
  read_csv("data/Zip Codes.csv", na = c("NA", ".", "")) |> 
  janitor::clean_names() |> 
  select(-state_fips, -file_date, -county) |> 
  distinct(zip_code, .keep_all = TRUE)
```

    ## Rows: 322 Columns: 7
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## chr (4): County, County Code, File Date, Neighborhood
    ## dbl (3): State FIPS, County FIPS, ZipCode
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

``` r
zori_df =
  read_csv("data/Zip_zori_NYC.csv", na = c("NA", ".", "")) |> 
  distinct(RegionName, .keep_all = TRUE) |> 
  pivot_longer(
    cols = "2015-01-31":"2024-08-31",
    names_to = "date",
    values_to = "zori"
  ) |> 
  janitor::clean_names() |> 
  rename(zip_code = region_name) |> 
  select(-region_type, -state_name, -state, -city, -metro) |> 
  separate(date, into = c("year", "month", "day"), sep = "-") |> 
  drop_na(zori)
```

    ## Rows: 149 Columns: 125
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## chr   (6): RegionType, StateName, State, City, Metro, CountyName
    ## dbl (119): RegionID, SizeRank, RegionName, 2015-01-31, 2015-02-28, 2015-03-3...
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

``` r
zip_zori_df =
  full_join(zip_df, zori_df) |>
  relocate(county_name, neighborhood)
```

    ## Joining with `by = join_by(zip_code)`

The resulting tidy data set includes information about the Zillow
observed rent index (`zori`) on different dates from January 2015 to
August 2024 in different neighborhoods in NYC (`neighborhood`). Other
variables also include the county the neighborhood is in
(`county_name`), the neighborhood zip code (`zip_code`), the county code
(`county_code`), the county FIPS (`county_fips`), the regionID
(`region_id`), and size ranks (`size_rank`). The data set includes 10621
observations and 11 total variables. There are 320 unique zip codes in
the data set and 43 unique neighborhoods.

Which ZIP codes appear in the ZIP code dataset but not in the Zillow
Rental Price dataset? Using a few illustrative examples discuss why
these ZIP codes might be excluded from the Zillow dataset.

``` r
missing_zips_df =
  anti_join(zip_df, zori_df)
```

    ## Joining with `by = join_by(zip_code)`

The zip codes that appear in the zip code data set but not in the ZORI
data set are 10464, 10474, 10475, 10499, 10550, 10704, 10705, 10803,
11202, 11224, 11239, 11241, 11242, 11243, 11245, 11247, 11251, 11252,
11256, 10008, 10020, 10041, 10043, 10045, 10047, 10048, 10055, 10072,
10080, 10081, 10082, 10087, 10101, 10102, 10103, 10104, 10105, 10106,
10107, 10108, 10109, 10110, 10111, 10112, 10113, 10114, 10115, 10116,
10117, 10118, 10119, 10120, 10121, 10122, 10123, 10124, 10125, 10126,
10129, 10130, 10131, 10132, 10133, 10138, 10149, 10150, 10151, 10152,
10153, 10154, 10155, 10156, 10157, 10158, 10159, 10160, 10161, 10163,
10164, 10165, 10166, 10167, 10168, 10169, 10170, 10171, 10172, 10173,
10174, 10175, 10176, 10177, 10178, 10179, 10185, 10197, 10199, 10213,
10242, 10249, 10256, 10259, 10260, 10261, 10265, 10268, 10269, 10270,
10271, 10272, 10273, 10274, 10275, 10276, 10277, 10278, 10279, 10281,
10285, 10286, 10292, 11001, 11004, 11005, 11040, 11096, 11351, 11352,
11359, 11362, 11363, 11371, 11380, 11381, 11386, 11405, 11411, 11412,
11413, 11414, 11416, 11417, 11419, 11420, 11421, 11422, 11423, 11424,
11425, 11427, 11428, 11429, 11430, 11431, 11433, 11436, 11439, 11451,
11499, 11559, 11580, 11690, 11694, 11695, 11697, 10302, 10307, 10309,
10310, 10311, 10313. This could be because there were no rentals listed
in these zip codes if they have a small population or not many
residential buildings. I also noticed a lot of these zip codes also have
missing values in the `neighborhood` column which might further indicate
these zip codes do not correspond to traditional residential or
geographic areas. The Empire State Building having its own zip code is a
good example of this because although it’s listed as a unique zip code
in the zip data set, there are no residential units to measure a ZORI
for.

``` r
drop_price_df =
  zip_zori_df |> 
  select(county_name, neighborhood, zip_code, year, month, zori)  |> 
  filter(year == "2020" | year == "2021", month == "01") |>  
  pivot_wider(
      names_from = year,
      values_from = zori) |> 
  rename(before_covid = "2020",
         after_covid = "2021") |> 
  mutate(before_covid = as.numeric(before_covid), 
        after_covid = as.numeric(after_covid),
      drop_in_price = before_covid - after_covid) |> 
  arrange(desc(drop_in_price))  |> 
  filter (row_number() <= 10) |> 
  select(-month)
```

For all zip codes, the average rental price in January 2021 was
2480.295689, compared to the average rental price in January 2020 being
2863.1539609. The minimum and maximum rental price in January 2021 for
all zip codes were 1420.3820768 and 5421.614077, respectively. The
minimum and maximum rental price in January 2020 for all zip codes were
1375.9764477 and 6334.2106678, respectively. We see the average rental
price dropped from 2020 to 2021. We also see the maximum rental price
dropped as well while the minimum rental price only rose a small amount.

All of the zip codes with the largest drop in price due to COVID belong
to the New York County. They also belong to the neighborhoods that
typically have high rent prices in general. This is probably due to the
fact that we are measuring drop in price rather than drop in price
percentage. The maximum drop in price being 912.5965909 would only be
reasonable for a rental that had a high price to begin with. For rentals
that have lower prices, it is extremely unlikely for the price to drop
that much, no matter the circumstance. Drop in price percentage might be
a more useful measurement to determine COVID’s impact on change in
rental prices.
